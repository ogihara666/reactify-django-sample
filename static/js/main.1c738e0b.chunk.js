(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{152:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(24),c=r.n(o),i=(r(65),r(10)),l=r(11),u=r(13),s=r(12),d=r(14),m=(r(67),r(69),r(25)),h=r.n(m),p=function(e){return 0==e.schedule.cellWidth?a.a.createElement("div",{class:"cell-under",key:e.key,style:{height:"".concat(5*e.schedule.cellHeight+.1*e.schedule.cellHeight,"rem")}}):0==e.schedule.cellHeight?a.a.createElement("div",null):a.a.createElement(h.a,{button:!0,key:e.key,style:{width:"".concat(100*e.schedule.cellWidth,"%"),margin:0,padding:0,backgroundColor:"#00b8d4",borderRadius:"0.4rem",boxSizing:"border-box"}},a.a.createElement("div",{class:"li-fillingCell",style:{height:"".concat(5*e.schedule.cellHeight,"rem"),zIndex:1},onClick:function(){e.clickAction(e.schedule.uuid)}},e.schedule.userName,a.a.createElement("br",null),"\u300c",e.schedule.content,"\u300d"))},f=function(e){return e.index%2==0?a.a.createElement(h.a,{style:{width:"100%",margin:0,padding:0},button:!0,onClick:function(){return e.clickAction("".concat(e.targetDatetime," ").concat(e.time))},key:e.index},a.a.createElement("div",{class:"li-blankCell box-even-black"})):a.a.createElement(h.a,{style:{width:"100%",margin:0,padding:0},button:!0,onClick:function(){return e.clickAction("".concat(e.targetDatetime," ").concat(e.time))},key:e.index},a.a.createElement("div",{class:"li-blankCell box-odd-black"}))},E=function(e){return 0==e.schedule?a.a.createElement(f,{key:e.index,index:e.index,clickAction:e.postEvent,time:e.time,targetDatetime:e.targetDatetime}):a.a.createElement(p,{key:e.index,schedule:e.schedule,index:e.index,clickAction:e.editEvent})},g=function(e){return a.a.createElement("div",{class:"box-scheduleHeader"},a.a.createElement("div",{class:"item-scheduleHeader"},"\u4f1a\u8b70\u5ba4",e.roomId))},y=function(e){return a.a.createElement("div",{class:"box-clockLine",style:{top:"".concat(e.top,"rem")}})},v=function(e){for(var t=[],r=1;r<=49;r++)t.push(!1);var n=e.scheduleList;for(var o in n)if(t[o]=n[o],n[o].cellHeight>1)for(var c=1;c<n[o].cellHeight;c++)t[Number(o)+c]={cellHeight:0};return a.a.createElement("ul",{class:"box-scheduleRow"},a.a.createElement(g,{roomId:e.roomId}),a.a.createElement(y,{top:20}),t.map(function(t,r){return a.a.createElement(E,{schedule:t,key:r,index:r,editEvent:e.editEvent,postEvent:e.postEvent,time:e.timeList[r],targetDatetime:e.targetDatetime})}))},T=r(31),D=(r(30),r(1)),b=r.n(D),k="http://35.211.249.14/",Y=function(e){var t=b()(e),r=k+"reserves/".concat(t.format("YYYY"),"/").concat(t.format("MM"),"/").concat(t.format("DD"));return console.log(r),fetch(r,{method:"GET"}).then(function(e){if(!e.ok)throw Error(e.statusText);return e}).then(function(e){return e.json()})},S=function(e){var t={1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{}};for(var r in e){var n=e[r],a=n.uuid,o=n.user_name,c=n.content,i=b()(n.start_time),l=b()(n.end_time),u=n.room_ids.sort(),s=n.cell_width,d=n.cell_height,m=2*Number(i.format("HH"))+Math.floor(Number(i.format("mm"))/30);for(var h in u){var p=u[h];t[p][m]={uuid:a,roomId:p,startTime:i,endTime:l,userName:o,content:c,cellHeight:d},t[p][m].cellWidth=s,s=0}}return t},M=function(e){var t={1:"\u4f1a\u8b70\u5ba41",2:"\u4f1a\u8b70\u5ba42",3:"\u4f1a\u8b70\u5ba43",4:"\u4f1a\u8b70\u5ba44",5:"\u4f1a\u8b70\u5ba45",6:"\u4f1a\u8b70\u5ba46",7:"\u4f1a\u8b70\u5ba47",8:"\u4f1a\u8b70\u5ba48"},r=[];for(var n in t)r.push(a.a.createElement(a.a.Fragment,null,a.a.createElement("input",{type:"checkbox",name:"room-choice",id:"room-choice-".concat(n),value:n}),a.a.createElement("label",{for:"room-choice-".concat(n)},t[n])));return a.a.createElement("div",null,r.map(function(e){return e}))},_=function(e){return a.a.createElement("select",{name:"time-select-".concat(e.name)},e.timeList.map(function(t,r){return e.initialValue==t?a.a.createElement("option",{value:t,selected:!0},t):a.a.createElement("option",{value:t},t)}))},H=(n.Component,function(e){return a.a.createElement("ul",{class:"box-scheduleTimeRow"},a.a.createElement("li",{class:"box-scheduleHeader"}),e.timeList.map(function(e,t){return t%2==0?a.a.createElement("li",{class:"item-scheduleTimeRow box-even"},e):a.a.createElement("li",{class:"item-scheduleTimeRow box-odd"},e)}))}),O=["00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30","05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00"],I=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this;setInterval(function(){e.props.fetchAllSchedules("".concat(e.props.targetYear,"-").concat(e.props.targetMonth,"-").concat(e.props.targetDate)),e.props.updateTime()},12e4)}},{key:"componentDidMount",value:function(){this.props.fetchAllSchedules("".concat(this.props.targetYear,"-").concat(this.props.targetMonth,"-").concat(this.props.targetDate))}},{key:"render",value:function(){for(var e=this,t=[],r=1;r<=8;r++)t.push(r);return a.a.createElement("div",{class:"box-schedules"},a.a.createElement(H,{timeList:O}),t.map(function(t){return a.a.createElement(v,{timeList:O,key:t,roomId:t,scheduleList:e.props.schedules[t],targetDatetime:"".concat(e.props.targetYear,"-").concat(e.props.targetMonth,"-").concat(e.props.targetDate),editEvent:e.props.selectSchedule,postEvent:e.props.selectBlank})}))}}]),t}(n.Component),x=Object(T.b)(function(e){return{schedules:e.api.schedules,currentHour:e.general.currentHour,currentMinute:e.general.currentMinute,targetYear:e.general.targetYear,targetMonth:e.general.targetMonth,targetDate:e.general.targetDate}},{fetchAllSchedules:function(e){return function(t){Y(e).then(function(e){var r=S(e.schedules);t({type:"FETCH_ALL_SCHEDULES",payload:r})})}},selectBlank:function(e,t){return function(r){console.log(e),r({type:"SELECT_BLANK",payload:{startTime:b()(e).format("YYYY-MM-DD HH:mm:00"),roomId:t}})}},selectSchedule:function(e){return function(t){fetch("http://35.211.249.14/"+e,{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){if(!e.ok)throw Error(e.statusText);return e.json()}).then(function(e){console.log(e);var t=e.schedule;return{uuid:t.uuid,startTime:b()(String(t.start_time)).format("YYYY-MM-DD HH:mm:ss"),endTime:b()(String(t.end_time)).format("YYYY-MM-DD HH:mm:ss"),userName:t.user_name,content:t.content,created:t.created,edited:t.edited,roomIds:t.room_ids}}).then(function(e){t({type:"SELECT_SCHEDULE",payload:{schedule:e,roomSelected:function(e){for(var t={},r=1;r<=8;r++)e.indexOf(r)>=0?t[r]=!0:t[r]=!1;return t}(e.roomIds)}})})}},updateTime:function(){return function(e){var t=b()();e({type:"UPDATE_TIME",payload:{isoWeekday:t.isoWeekday(),year:t.format("YYYY"),month:t.format("MM"),date:t.format("DD"),hour:t.format("HH"),minute:t.format("mm")}})}},toToday:function(){return function(e){var t=b()();e({type:"TO_TODAY",payload:{year:t.format("YYYY"),month:t.format("MM"),date:t.format("DD"),isoWeekday:t.isoWeekday()}})}}})(I),L=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(x,null)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=r(7),w={schedules:{1:{},2:{},3:{},4:{},5:{},6:{},7:{},8:{}}},A={roomTouched:0,scheduleTouched:{uuid:"",roomIds:[],startTime:"",endTime:"",userName:"",content:"",edited:"",created:""},formVisible:!1,editing:!1,insertSchedule:{roomIds:[],startTime:"",endTime:"",userName:"",content:""},roomSelected:{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1}},j={currentYear:b()().format("YYYY"),currentMonth:b()().format("MM"),currentDate:b()().format("DD"),currentDay:b()().isoWeekday(),currentHour:b()().format("HH"),currentMinute:b()().format("mm"),targetYear:b()().format("YYYY"),targetMonth:b()().format("MM"),targetDay:N(b()().isoWeekday()),targetDate:b()().format("DD")};function N(e){switch(e){case 1:return"\u6708";case 2:return"\u706b";case 3:return"\u6c34";case 4:return"\u6728";case 5:return"\u91d1";case 6:return"\u571f";case 7:return"\u65e5"}}var W=Object(C.c)({api:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ALL_SCHEDULES":return{schedules:t.payload};case"SEND_POST":default:return e}},form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,r=Object.assign({},e);switch(t.type){case"TOGGLE_EDIT_FORM":return r.editing=!r.editing,r.roomSelected={1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1},r;case"SELECT_SCHEDULE":r.editing=!0;var n=t.payload.schedule;return r.scheduleTouched=n,r.roomSelected=t.payload.roomSelected,r;case"CHANGE_FORM_VALUE":var a=t.payload.target,o=t.payload.value;return r.insertSchedule[a]=o,r;case"CHANGE_EDIT_VALUE":var c=t.payload.target,i=t.payload.value;return r.scheduleTouched[c]=i,r;case"SELECT_BLANK":return r.insertSchedule.roomIds=[t.payload.roomId],r.roomSelected[t.payload.roomId]=!0,r.insertSchedule.startTime=t.payload.startTime,r.formVisible=!0,r;case"TOGGLE_FORM_VISIBLE":return{roomTouched:0,scheduleTouched:"",formVisible:!1,editing:!1,insertSchedule:{roomIds:[],startTime:"",endTime:"",userName:"",content:""},roomSelected:{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1}};case"TOGGLE_ROOM_CHECK":var l=t.payload;r.roomSelected[l]=!r.roomSelected[l];var u=r.insertSchedule.roomIds.indexOf(l);return u>=0?r.insertSchedule.roomIds.splice(u,1):r.insertSchedule.roomIds.push(t.payload),r;case"TOGGLE_ROOM_CHECK_IN_EDITING":var s=t.payload;r.roomSelected[s]=!r.roomSelected[s];var d=r.scheduleTouched.roomIds.indexOf(s);return d>=0?r.scheduleTouched.roomIds.splice(d,1):r.scheduleTouched.roomIds.push(s),r;default:return Object.assign({},e)}},general:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0,r=Object.assign({},e);switch(t.type){case"UPDATE_TIME":return r.currentDay=N(t.payload.isoWeekday),r.currentYear=t.payload.year,r.currentMonth=t.payload.month,r.currentDate=t.payload.date,r.currentHour=t.payload.hour,r.currentMinute=t.payload.minute,r;case"SELECT_DATE":case"ADD_DATE":case"TO_TODAY":return r.targetYear=t.payload.year,r.targetMonth=t.payload.month,r.targetDate=t.payload.date,r.targetDay=N(t.payload.isoWeekday),r;default:return r}}}),G=[r(58).a],R=Object(C.e)(W,{},Object(C.d)(C.a.apply(void 0,G))),U=function(e){return a.a.createElement(T.a,{store:R},e.children)};c.a.render(a.a.createElement(U,null,a.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},60:function(e,t,r){e.exports=r(152)},65:function(e,t,r){},67:function(e,t,r){},69:function(e,t,r){}},[[60,2,1]]]);
//# sourceMappingURL=main.1c738e0b.chunk.js.map